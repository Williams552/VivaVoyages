@model Tour

@{
    ViewData["Title"] = "ViewTourDetails";
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="~/css/TourList.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <title>Document</title>
</head>



<body>
  <div class="search-container">
        <form id="search-form" action="@Url.Action("SearchTours", "ListTourCustomer")" method="get">
           <div class="input-group">
            <input type="text" name="searchTerm" placeholder="Search tours...">
            <button type="submit" class="search-button"><i id="search-icon" class="bi bi-search"></i></button>
        </div>
        </form>
    </div>
    <div class="flex-it">
        <div class="tour-info">
            <dt><h2>@Model.TourName</h2></dt>
        </div>
        <div class="it-cp">
            <h5 style="display: inline-block;  "><strong style="color: red; "><p class="totalCostElement" style="display: inline-block;"></p></strong>/Guest</h5>
            

            <div class="col-it">
                <a asp-action="Create" asp-controller="Booking" asp-route-id="@Model.TourId"
                    class="btn btn-primary btn-lg " style="width: 170px;"><i id="bk" class="bi bi-cart2"></i>Booking</a>
                <a id="btn-open" class="btn btn-primary btn-lg contact" style="width: 170px;" href="#"><i id="call" class="bi bi-telephone"></i>Contact</a>
                
                <!--Modal-->
            </div>
        </div>
    </div>
    <div id="modal-container"  >
                        <div class="modaldemo" id="modal">
                            <div class="modal-header">
                                    <h5>Contact</h5>
                                    <button id="btn-close"><i class="bi bi-x"></i></button>
                            </div>
                            <div class="modal-body">
                                    <p>Email: vivavoyages8@gmail.com</p>
                                    <p>Phone: 0706506774</p>
                                    <i>Address: An Binh, Ninh Kieu, can Tho, FPT University</i>

                            </div>
                        </div>
                        
                </div>

   <div  class="roww">


        <div class="img-dt">
            <img src="@Url.Content(@Model.ImagePath)" alt="Tour Image" class="tour-image">
        </div>

        <div class="img-place">

     @foreach (var destination in Model.Destinations.Take(4))

{   
    @if (!string.IsNullOrEmpty(destination.Place.ImagePath))
    {
        <img src="@Url.Content(destination.Place.ImagePath)" alt="Place Image" class="place-image">
    }
    else
    {
        <img style="display: none;" src="#" alt="Place Image" class="place-image">
    }
}

        </div>
    </div>

    <div class="tour-details">
        <dl class="dl-horizontal">
            <p><strong>Tour code: </strong>@Model.TourId</p>
            <p><strong>Date Start: </strong>@Model.DateStart</p>
            <p><strong>Tour Dates: </strong>@Model.TourDates</p>
            <p><strong>Max Passenger: </strong>@Model.MaxPasseger</p>
        
           



        </dl>
    </div>

     <div class="center">
    <h2><i class="bi bi-map"></i>Schedule</h2>
</div>

<div class="container-dt" >

    <div class="lt">
    @{
        int count = 1;
        foreach (var item in Model.Destinations)
        {
            <div class="loat"><p>Day</p></div>
            <div class="line-circle-container">
                <div class="line">
                    <div class="cd">
                         <i id="icon" class="bi bi-circle-fill"></i> 
                         <p class="count">@count</p> 
                    </div>
                </div> <!-- Đường dọc -->
                
                <div class="dp">
                    <div>
                        <p class="ccc">&nbsp; </p>
                    </div>
                    <div class="tourdt">
                        <p id="ds"><strong>@item.DateVisit</strong></p>
                        <p><strong>@item.Place.PlaceName</strong></p>
                
                    </div>
                </div>
            </div>
            count++;
        }
    }
</div>


    <div class="detail-item">
       @{
        int countt = 1;
        foreach (var item in Model.Destinations)
        {

            <div class="it-content">
               
                <div class="content-i">
                     
                    <strong id="d"><p>Day &nbsp; </p></strong> 
                     
                </div>
              
                
           <div class="content-i">
           <strong><p class="countt">@countt - &nbsp; </p></strong>  
           </div>

           <div class="content-i">
            <p><strong>@item.Place.PlaceName</strong></p>
           </div>
            </div>
            <div class="descri" >
                <div class="ll"></div>
                <p>@item.Description</p>
            </div>
             
                 
                   
            countt++;
        }
    }
    </div>
</div>

 



   

<div class="flex-cost">

    <div class="cas">
            <div class="caa">
     <h2>Cost And Single Room</h2>
</div>
    <div class="dt-it">
        <div>
            Tour price:
        </div>
        <div>
            <p class="totalCostElement"> đ</p>
            
        </div>
    </div>

    <div class="dt-it">
        <div>
            Single room:
        </div>
        <div>
            <p class="item-dt">@Model.SingleRoomCost đ</p>
        </div>
    </div>

    <div class="dt-it">
        <div>
            <strong>Tax:</strong>
        </div>
        <strong class="item-dt" >10% </strong>
         
</div>
<div>
    <p style="color: red;">Price does not include tax</p>
</div>
    </div>
   

    <div class="tg">
            <div class="hdv">
            <h2>Tour Guide Information</h2>
         
            <p>@Model.TourGuide</p>
        </div>
    </div>
  
</div>

<div class="other-tours">
    <div class="center">
        <h2>Customers Who Bought This Tour Also Bought</h2>
    </div>
    
    <div class="tour-items">
        @foreach (var otherTour in ViewBag.OtherTours)
        {
            <div class="tour-item">
                <a  asp-action="ViewTourDetails" asp-route-id="@otherTour.TourId">
                    <img class="tour-imagea" src="@Url.Content(otherTour.ImagePath)" alt="Tour Image">
                </a>
                <div class="tour-info">
                    <p><strong>Date Start:</strong> @otherTour.DateStart</p> 
                     <a asp-action="ViewTourDetails" asp-route-id="@otherTour.TourId">
                        <p><strong>@otherTour.TourName</strong></p>
                    </a>
                    <p><strong>Tour Dates:</strong> @otherTour.TourDates</p>
                    <p><strong>Max Passenger:</strong> @otherTour.MaxPasseger</p>
                    <p><strong>Cost:</strong> @(otherTour.Cost + otherTour.ExpectedProfit)đ</p>

                     <a asp-action="Create" asp-controller="Booking" asp-route-id="@Model.TourId"
                    class="btn btn-primary" style="color: white;"><i class="bi bi-cart2"></i>Booking</a>
                
                </div>
            </div>
        }
    </div>
</div>




        
        



        <script>
            const cost = parseFloat("@Model.Cost");
const profit = parseFloat("@Model.ExpectedProfit");
const tax = parseFloat("@Model.Tax");

// Tính toán tổng giá
const totalCost = (cost + profit);
const shorttotal = totalCost.toFixed(4);

// Hiển thị tổng giá trị lên trang HTML
const totalCostElements = document.querySelectorAll(".totalCostElement"); // Lấy tất cả các phần tử có class là totalCostElement
totalCostElements.forEach(element => {
    element.innerHTML = `<p>${shorttotal}đ</p>`; // Thêm kết quả tổng giá vào từng phần tử
});

        </script>

        <script>
            const btn_open= document.getElementById('btn-open');
            const btn_close= document.getElementById('btn-close');
            const modal_container = document.getElementById('modal-container');
            const modal_demo= document.getElementById('modal');

            btn_open.addEventListener('click', ()=>{
                   
                   modal_container.classList.add('show');
            });
            btn_close.addEventListener('click', ()=>{
                   
                   modal_container.classList.remove('show');
            });

            modal_container.addEventListener('click', (e)=>{
                if(!modal_demo.contains(e.target)){
                    btn_close.click();
                }
            });
        </script>
</body>





</html>